<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>AquaNet Admin</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-dark text-white">
    <div class="container mt-5">
        <h2 class="mb-4">‚öôÔ∏è AquaNet Control Center</h2>
        
        <div class="row mb-4">
            <div class="col-md-4">
                <div class="card bg-secondary text-white">
                    <div class="card-body text-center">
                        <h3><%= totalFarmers %></h3>
                        <p>–§–µ—Ä–º–µ—Ä–æ–≤</p>
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="card bg-secondary text-white">
                    <div class="card-body text-center">
                        <h3><%= totalArea %> –≥–∞</h3>
                        <p>–û–±—â–∞—è –ø–ª–æ—â–∞–¥—å</p>
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="card bg-secondary text-white">
                    <div class="card-body text-center">
                        <h3><%= deficit %>%</h3>
                        <p>–¢–µ–∫—É—â–∏–π –¥–µ—Ñ–∏—Ü–∏—Ç</p>
                    </div>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-md-6">
                <div class="card bg-dark border-secondary">
                    <div class="card-header border-secondary">üéõ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–∞–º–∏</div>
                    <div class="card-body">
                        <form action="/admin/set-deficit" method="POST">
                            <label class="form-label">–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —É—Ä–æ–≤–µ–Ω—å –¥–µ—Ñ–∏—Ü–∏—Ç–∞ –≤–æ–¥—ã (%)</label>
                            <input type="range" class="form-range" name="deficit" min="0" max="100" value="<%= deficit %>" oninput="this.nextElementSibling.value = this.value">
                            <output><%= deficit %></output>%
                            <br>
                            <button type="submit" class="btn btn-danger w-100 mt-2">–û–±–Ω–æ–≤–∏—Ç—å —Å–∏—Å—Ç–µ–º—É</button>
                            <small class="text-muted">–≠—Ç–æ –∏–∑–º–µ–Ω–∏—Ç –≤—Ä–µ–º—è –ø–æ–ª–∏–≤–∞ –¥–ª—è –≤—Å–µ—Ö —Ñ–µ—Ä–º–µ—Ä–æ–≤ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.</small>
                        </form>
                    </div>
                </div>
            </div>

            <div class="col-md-6">
                <div class="card bg-dark border-secondary">
                    <div class="card-header border-secondary">üö® –ü–æ—Å–ª–µ–¥–Ω–∏–µ —Å–∏–≥–Ω–∞–ª—ã (SOS)</div>
                    <div class="card-body">
                        <ul class="list-group list-group-flush">
                            <% reports.forEach(function(report) { %>
                                <li class="list-group-item bg-dark text-white border-secondary">
                                    <span class="badge bg-danger">SOS</span> 
                                    ID: <%= report.user_id %> ‚Äî <%= report.timestamp %>
                                </li>
                            <% }); %>
                            <% if (reports.length === 0) { %>
                                <p class="text-muted">–ñ–∞–ª–æ–± –Ω–µ—Ç.</p>
                            <% } %>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        
        <a href="/" class="btn btn-outline-light mt-4">‚¨ÖÔ∏è –ù–∞ –≥–ª–∞–≤–Ω—É—é</a>
    </div>
</body>
</html>